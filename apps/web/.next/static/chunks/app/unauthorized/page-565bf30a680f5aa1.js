(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[305],{994:(e,s,r)=>{Promise.resolve().then(r.bind(r,8052))},1460:(e,s,r)=>{"use strict";r.d(s,{A:()=>a});var t=r(7620),n=r(6006),i=r(9039);function a(){let{data:e,status:s}=(0,n.useSession)(),{user:r,isAuthenticated:a,isLoading:o,error:l,setSession:u,login:d,logout:c,register:m,clearError:g}=(0,i.n)();(0,t.useEffect)(()=>{u(e)},[e,u]);let f=e=>(null==r?void 0:r.role)===e,h=e=>!!r&&e.includes(r.role);return{user:r,session:e,isAuthenticated:a,isLoading:o||"loading"===s,error:l,login:d,logout:c,register:m,clearError:g,hasRole:f,hasAnyRole:h,isAdmin:()=>f("ADMIN"),isProjectOwner:()=>f("PROJECT_OWNER"),canAccessAdmin:()=>h(["ADMIN","PROJECT_OWNER"])}}},8052:(e,s,r)=>{"use strict";r.r(s),r.d(s,{default:()=>a});var t=r(4568),n=r(7541),i=r(1460);function a(){let e=(0,n.useRouter)(),{logout:s}=(0,i.A)(),r=async()=>{await s(),e.push("/auth/login")};return(0,t.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 py-12 px-4 sm:px-6 lg:px-8",children:(0,t.jsxs)("div",{className:"max-w-md w-full space-y-8",children:[(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("div",{className:"mx-auto flex items-center justify-center h-12 w-12 rounded-full bg-red-100",children:(0,t.jsx)("svg",{className:"h-6 w-6 text-red-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"})})}),(0,t.jsx)("h2",{className:"mt-6 text-3xl font-extrabold text-gray-900",children:"Access Denied"}),(0,t.jsx)("p",{className:"mt-2 text-sm text-gray-600",children:"You don't have permission to access this page."})]}),(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsx)("button",{onClick:()=>e.back(),className:"w-full flex justify-center py-2 px-4 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:"Go Back"}),(0,t.jsx)("button",{onClick:()=>e.push("/dashboard"),className:"w-full flex justify-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:"Go to Dashboard"}),(0,t.jsx)("button",{onClick:r,className:"w-full flex justify-center py-2 px-4 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:"Sign Out"})]})]})})}},9039:(e,s,r)=>{"use strict";r.d(s,{n:()=>o});var t=r(1367),n=r(848),i=r(6006),a=r(7011);let o=(0,t.vt)()((0,n.lt)((e,s)=>({user:null,session:null,isAuthenticated:!1,isLoading:!1,error:null,login:async(r,t)=>{e({isLoading:!0,error:null});try{let n=await (0,i.signIn)("credentials",{email:r,password:t,redirect:!1});if(null==n?void 0:n.error)return e({error:"Invalid email or password",isLoading:!1}),!1;return await s().refreshSession(),e({isLoading:!1}),!0}catch(s){return e({error:"Login failed. Please try again.",isLoading:!1}),!1}},logout:async()=>{e({isLoading:!0});try{await (0,i.signOut)({redirect:!1}),e({user:null,session:null,isAuthenticated:!1,isLoading:!1,error:null})}catch(s){e({error:"Logout failed",isLoading:!1})}},refreshSession:async()=>{try{let s=await (0,i.getSession)();(null==s?void 0:s.user)?e({session:s,user:{id:s.user.id,email:s.user.email,name:s.user.name||"",role:s.user.role},isAuthenticated:!0}):e({session:null,user:null,isAuthenticated:!1})}catch(s){console.error("Failed to refresh session:",s),e({session:null,user:null,isAuthenticated:!1})}},register:async r=>{e({isLoading:!0,error:null});try{let t=await fetch("".concat(a.env.NEXT_PUBLIC_API_URL,"/api/v1/auth/register"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:r.email,password:r.password,first_name:r.firstName,last_name:r.lastName,company_name:r.companyName})});if(!t.ok){let s=await t.json();return e({error:s.detail||"Registration failed",isLoading:!1}),!1}let n=await s().login(r.email,r.password);return e({isLoading:!1}),n}catch(s){return e({error:"Registration failed. Please try again.",isLoading:!1}),!1}},clearError:()=>e({error:null}),setSession:s=>{(null==s?void 0:s.user)?e({session:s,user:{id:s.user.id,email:s.user.email,name:s.user.name||"",role:s.user.role},isAuthenticated:!0}):e({session:null,user:null,isAuthenticated:!1})}}),{name:"auth-store"}))}},e=>{e.O(0,[341,587,18,358],()=>e(e.s=994)),_N_E=e.O()}]);