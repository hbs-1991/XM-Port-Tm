exports.id=598,exports.ids=[598],exports.modules={10573:(a,b,c)=>{"use strict";c.d(b,{cn:()=>f});var d=c(79390),e=c(25442);function f(...a){return(0,e.QP)((0,d.$)(a))}},14276:()=>{},26161:(a,b,c)=>{"use strict";c.d(b,{n:()=>g});var d=c(52661),e=c(7904),f=c(16422);let g=(0,d.vt)()((0,e.lt)((a,b)=>({user:null,session:null,isAuthenticated:!1,isLoading:!1,error:null,login:async(c,d)=>{a({isLoading:!0,error:null});try{let e=await (0,f.signIn)("credentials",{email:c,password:d,redirect:!1});if(e?.error)return a({error:"Invalid email or password",isLoading:!1}),!1;return await b().refreshSession(),a({isLoading:!1}),!0}catch(b){return a({error:"Login failed. Please try again.",isLoading:!1}),!1}},logout:async()=>{a({isLoading:!0});try{await (0,f.signOut)({redirect:!1}),a({user:null,session:null,isAuthenticated:!1,isLoading:!1,error:null})}catch(b){a({error:"Logout failed",isLoading:!1})}},refreshSession:async()=>{try{let b=await (0,f.getSession)();b?.user?a({session:b,user:b.user,isAuthenticated:!0}):a({session:null,user:null,isAuthenticated:!1})}catch(b){console.error("Failed to refresh session:",b),a({session:null,user:null,isAuthenticated:!1})}},register:async c=>{a({isLoading:!0,error:null});try{let d="http://localhost:8000",e={email:c.email,password:c.password,first_name:c.firstName,last_name:c.lastName,company_name:c.companyName};console.log("=== API REQUEST DEBUG ==="),console.log("API URL:",`${d}/api/v1/auth/register`),console.log("Request Body:",e),console.log("Request Headers:",{"Content-Type":"application/json",Accept:"application/json"});let f=await fetch(`${d}/api/v1/auth/register`,{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify(e)});if(console.log("=== API RESPONSE DEBUG ==="),console.log("Response Status:",f.status),console.log("Response Headers:",Object.fromEntries(f.headers.entries())),!f.ok){let b=await f.json();return console.log("Error Response Body:",b),console.log("Detailed Error:",{status:f.status,statusText:f.statusText,errorDetail:b.detail,fullError:b}),a({error:b.detail||"Registration failed",isLoading:!1}),!1}let g=await f.json();console.log("Success Response Body:",g),console.log("Registration successful! User created:",g.user);let h=await b().login(c.email,c.password);return a({isLoading:!1}),h}catch(b){return console.log("=== CATCH ERROR DEBUG ==="),console.error("Registration network/parsing error:",b),console.log("Error type:",typeof b),console.log("Error message:",b instanceof Error?b.message:"Unknown error"),a({error:"Registration failed. Please try again.",isLoading:!1}),!1}},clearError:()=>a({error:null}),setSession:b=>{b?.user?a({session:b,user:b.user,isAuthenticated:!0}):a({session:null,user:null,isAuthenticated:!1})}}),{name:"auth-store"}))},30408:(a,b,c)=>{Promise.resolve().then(c.bind(c,82466))},34664:(a,b,c)=>{"use strict";c.d(b,{Providers:()=>d});let d=(0,c(25459).registerClientReference)(function(){throw Error("Attempted to call Providers() from the server but Providers is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/mnt/d/PROJECTS/XM-PORT/apps/web/src/app/providers.tsx","Providers")},40986:(a,b,c)=>{Promise.resolve().then(c.bind(c,34664))},42657:(a,b,c)=>{Promise.resolve().then(c.t.bind(c,58671,23)),Promise.resolve().then(c.t.bind(c,56542,23)),Promise.resolve().then(c.t.bind(c,88248,23)),Promise.resolve().then(c.t.bind(c,49743,23)),Promise.resolve().then(c.t.bind(c,96231,23)),Promise.resolve().then(c.t.bind(c,10959,23)),Promise.resolve().then(c.t.bind(c,72041,23)),Promise.resolve().then(c.t.bind(c,95094,23)),Promise.resolve().then(c.t.bind(c,67487,23))},47570:(a,b,c)=>{"use strict";c.r(b),c.d(b,{default:()=>i,metadata:()=>h});var d=c(5939),e=c(20360),f=c.n(e),g=c(34664);c(14276);let h={title:"XM-Port - AI-Powered Customs Documentation",description:"Transform your customs documentation process with AI-powered automation"};function i({children:a}){return(0,d.jsx)("html",{lang:"en",suppressHydrationWarning:!0,children:(0,d.jsx)("body",{className:f().className,children:(0,d.jsx)(g.Providers,{children:a})})})}},72347:(a,b,c)=>{"use strict";c.d(b,{E:()=>h});var d=c(78157);c(31768);var e=c(4306),f=c(10573);let g=(0,e.F)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function h({className:a,variant:b,...c}){return(0,d.jsx)("div",{className:(0,f.cn)(g({variant:b}),a),...c})}},74154:(a,b,c)=>{"use strict";c.d(b,{A:()=>f}),c(31768);var d=c(16422),e=c(26161);function f(){let{data:a,status:b}=(0,d.useSession)(),{user:c,isAuthenticated:f,isLoading:g,error:h,setSession:i,login:j,logout:k,register:l,clearError:m}=(0,e.n)(),n=a=>c?.role===a,o=a=>!!c&&a.includes(c.role);return{user:c,session:a,isAuthenticated:f,isLoading:g||"loading"===b,error:h,login:j,logout:k,register:l,clearError:m,hasRole:n,hasAnyRole:o,isAdmin:()=>n("ADMIN"),isProjectOwner:()=>n("PROJECT_OWNER"),canAccessAdmin:()=>o(["ADMIN","PROJECT_OWNER"])}}},75266:(a,b,c)=>{Promise.resolve().then(c.bind(c,81264))},79105:(a,b,c)=>{Promise.resolve().then(c.t.bind(c,48365,23)),Promise.resolve().then(c.t.bind(c,64596,23)),Promise.resolve().then(c.t.bind(c,56186,23)),Promise.resolve().then(c.t.bind(c,67805,23)),Promise.resolve().then(c.t.bind(c,27561,23)),Promise.resolve().then(c.t.bind(c,47569,23)),Promise.resolve().then(c.t.bind(c,42747,23)),Promise.resolve().then(c.t.bind(c,56676,23)),Promise.resolve().then(c.bind(c,97225))},80556:(a,b,c)=>{"use strict";c.d(b,{$:()=>j,r:()=>i});var d=c(78157),e=c(31768),f=c(90632),g=c(4306),h=c(10573);let i=(0,g.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),j=e.forwardRef(({className:a,variant:b,size:c,asChild:e=!1,...g},j)=>{let k=e?f.DX:"button";return(0,d.jsx)(k,{className:(0,h.cn)(i({variant:b,size:c,className:a})),ref:j,...g})});j.displayName="Button"},81264:(a,b,c)=>{"use strict";c.d(b,{Providers:()=>h});var d=c(78157),e=c(16422);c(31768);var f=c(26556);function g({children:a,...b}){return(0,d.jsx)(f.N,{...b,children:a})}function h({children:a}){return(0,d.jsx)(e.SessionProvider,{children:(0,d.jsx)(g,{attribute:"class",defaultTheme:"light",enableSystem:!0,disableTransitionOnChange:!0,children:a})})}},82466:(a,b,c)=>{"use strict";c.r(b),c.d(b,{default:()=>d});let d=(0,c(25459).registerClientReference)(function(){throw Error("Attempted to call the default export of \"/mnt/d/PROJECTS/XM-PORT/apps/web/src/app/(dashboard)/layout.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/mnt/d/PROJECTS/XM-PORT/apps/web/src/app/(dashboard)/layout.tsx","default")},93960:(a,b,c)=>{Promise.resolve().then(c.bind(c,95384))},95384:(a,b,c)=>{"use strict";c.r(b),c.d(b,{default:()=>L});var d=c(78157),e=c(31768),f=c(94496),g=c.n(f),h=c(71159),i=c(74154);function j({children:a,requiredRole:b,allowedRoles:c,fallbackUrl:e="/auth/login"}){(0,h.useRouter)();let{isAuthenticated:f,isLoading:g,user:j,hasRole:k,hasAnyRole:l}=(0,i.A)();return g?(0,d.jsx)("div",{className:"flex items-center justify-center min-h-screen",children:(0,d.jsx)("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-blue-600"})}):f&&(!b||k(b))&&(!c||l(c))?(0,d.jsx)(d.Fragment,{children:a}):null}var k=c(16422),l=c(65730),m=c(13033),n=c(5898),o=c(56283),p=c(6046),q=c(8911),r=c(48228),s=c(36022),t=c(22785),u=c(92648),v=c(9686),w=c(11738),x=c(6176),y=c(10573);let z=u.bL,A=u.l9;u.YJ,u.ZL,u.Pb,u.z6,e.forwardRef(({className:a,inset:b,children:c,...e},f)=>(0,d.jsxs)(u.ZP,{ref:f,className:(0,y.cn)("flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",b&&"pl-8",a),...e,children:[c,(0,d.jsx)(v.A,{className:"ml-auto"})]})).displayName=u.ZP.displayName,e.forwardRef(({className:a,...b},c)=>(0,d.jsx)(u.G5,{ref:c,className:(0,y.cn)("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-dropdown-menu-content-transform-origin]",a),...b})).displayName=u.G5.displayName;let B=e.forwardRef(({className:a,sideOffset:b=4,...c},e)=>(0,d.jsx)(u.ZL,{children:(0,d.jsx)(u.UC,{ref:e,sideOffset:b,className:(0,y.cn)("z-50 max-h-[var(--radix-dropdown-menu-content-available-height)] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-dropdown-menu-content-transform-origin]",a),...c})}));B.displayName=u.UC.displayName;let C=e.forwardRef(({className:a,inset:b,...c},e)=>(0,d.jsx)(u.q7,{ref:e,className:(0,y.cn)("relative flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",b&&"pl-8",a),...c}));C.displayName=u.q7.displayName,e.forwardRef(({className:a,children:b,checked:c,...e},f)=>(0,d.jsxs)(u.H_,{ref:f,className:(0,y.cn)("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",a),checked:c,...e,children:[(0,d.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,d.jsx)(u.VF,{children:(0,d.jsx)(w.A,{className:"h-4 w-4"})})}),b]})).displayName=u.H_.displayName,e.forwardRef(({className:a,children:b,...c},e)=>(0,d.jsxs)(u.hN,{ref:e,className:(0,y.cn)("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",a),...c,children:[(0,d.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,d.jsx)(u.VF,{children:(0,d.jsx)(x.A,{className:"h-2 w-2 fill-current"})})}),b]})).displayName=u.hN.displayName;let D=e.forwardRef(({className:a,inset:b,...c},e)=>(0,d.jsx)(u.JU,{ref:e,className:(0,y.cn)("px-2 py-1.5 text-sm font-semibold",b&&"pl-8",a),...c}));D.displayName=u.JU.displayName;let E=e.forwardRef(({className:a,...b},c)=>(0,d.jsx)(u.wv,{ref:c,className:(0,y.cn)("-mx-1 my-1 h-px bg-muted",a),...b}));E.displayName=u.wv.displayName;var F=c(80556),G=c(4708);let H=e.forwardRef(({className:a,...b},c)=>(0,d.jsx)(G.bL,{ref:c,className:(0,y.cn)("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",a),...b}));H.displayName=G.bL.displayName,e.forwardRef(({className:a,...b},c)=>(0,d.jsx)(G._V,{ref:c,className:(0,y.cn)("aspect-square h-full w-full",a),...b})).displayName=G._V.displayName;let I=e.forwardRef(({className:a,...b},c)=>(0,d.jsx)(G.H4,{ref:c,className:(0,y.cn)("flex h-full w-full items-center justify-center rounded-full bg-muted",a),...b}));I.displayName=G.H4.displayName;var J=c(72347);let K=[{name:"Dashboard",href:"/dashboard",icon:l.A},{name:"Upload Files",href:"/dashboard/upload",icon:m.A},{name:"Processing History",href:"/dashboard/history",icon:n.A},{name:"Profile",href:"/dashboard/profile",icon:o.A}];function L({children:a}){let[b,c]=(0,e.useState)(!1),f=(0,h.usePathname)(),{user:l}=(0,i.A)(),m=async()=>{await (0,k.signOut)({callbackUrl:"/"})};return(0,d.jsx)(j,{children:(0,d.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[b&&(0,d.jsx)("div",{className:"fixed inset-0 z-40 bg-gray-600 bg-opacity-75 lg:hidden",onClick:()=>c(!1)}),(0,d.jsxs)("div",{className:`fixed inset-y-0 left-0 z-50 w-64 transform bg-white shadow-lg transition-transform duration-300 ease-in-out lg:hidden ${b?"translate-x-0":"-translate-x-full"}`,children:[(0,d.jsxs)("div",{className:"flex h-16 items-center justify-between px-4",children:[(0,d.jsx)("h2",{className:"text-xl font-semibold text-gray-900",children:"XM-Port"}),(0,d.jsx)("button",{onClick:()=>c(!1),className:"text-gray-500 hover:text-gray-700",children:(0,d.jsx)(p.A,{className:"h-6 w-6"})})]}),(0,d.jsx)("nav",{className:"mt-5 space-y-1 px-2",children:K.map(a=>{let b=f===a.href;return(0,d.jsxs)(g(),{href:a.href,onClick:()=>c(!1),className:`group flex items-center rounded-md px-2 py-2 text-sm font-medium transition-colors ${b?"bg-blue-50 text-blue-700":"text-gray-700 hover:bg-gray-50 hover:text-gray-900"}`,children:[(0,d.jsx)(a.icon,{className:`mr-3 h-5 w-5 flex-shrink-0 ${b?"text-blue-700":"text-gray-400 group-hover:text-gray-500"}`}),a.name]},a.name)})})]}),(0,d.jsx)("div",{className:"hidden lg:fixed lg:inset-y-0 lg:flex lg:w-64 lg:flex-col",children:(0,d.jsxs)("div",{className:"flex min-h-0 flex-1 flex-col border-r border-gray-200 bg-white",children:[(0,d.jsx)("div",{className:"flex h-16 flex-shrink-0 items-center px-4 border-b border-gray-200",children:(0,d.jsx)("h2",{className:"text-xl font-semibold text-gray-900",children:"XM-Port"})}),(0,d.jsx)("nav",{className:"mt-5 flex-1 space-y-1 px-2",children:K.map(a=>{let b=f===a.href;return(0,d.jsxs)(g(),{href:a.href,className:`group flex items-center rounded-md px-2 py-2 text-sm font-medium transition-colors ${b?"bg-blue-50 text-blue-700":"text-gray-700 hover:bg-gray-50 hover:text-gray-900"}`,children:[(0,d.jsx)(a.icon,{className:`mr-3 h-5 w-5 flex-shrink-0 ${b?"text-blue-700":"text-gray-400 group-hover:text-gray-500"}`}),a.name]},a.name)})})]})}),(0,d.jsxs)("div",{className:"lg:pl-64",children:[(0,d.jsx)("header",{className:"sticky top-0 z-30 bg-white shadow",children:(0,d.jsx)("div",{className:"px-4 sm:px-6 lg:px-8",children:(0,d.jsxs)("div",{className:"flex h-16 items-center justify-between",children:[(0,d.jsx)("button",{onClick:()=>c(!0),className:"text-gray-500 hover:text-gray-700 lg:hidden",children:(0,d.jsx)(q.A,{className:"h-6 w-6"})}),(0,d.jsx)("div",{className:"flex items-center space-x-4",children:l&&(0,d.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,d.jsx)(r.A,{className:"h-5 w-5 text-gray-400"}),(0,d.jsxs)("div",{className:"text-sm",children:[(0,d.jsx)("span",{className:"text-gray-500",children:"Credits:"}),(0,d.jsx)(J.E,{variant:"outline",className:"ml-2",children:l.creditsRemaining?.toLocaleString()??"0"})]})]})}),(0,d.jsxs)(z,{children:[(0,d.jsx)(A,{asChild:!0,children:(0,d.jsxs)(F.$,{variant:"ghost",className:"flex items-center space-x-3 hover:bg-gray-50",children:[(0,d.jsx)(H,{className:"h-8 w-8",children:(0,d.jsx)(I,{className:"bg-blue-500 text-white",children:l?`${l.firstName?.[0]||""}${l.lastName?.[0]||""}`.toUpperCase():"U"})}),(0,d.jsxs)("div",{className:"hidden text-left sm:block",children:[(0,d.jsxs)("p",{className:"text-sm font-medium text-gray-700",children:[l?.firstName," ",l?.lastName]}),(0,d.jsx)("p",{className:"text-xs text-gray-500",children:l?.email})]}),(0,d.jsx)(s.A,{className:"h-4 w-4 text-gray-400"})]})}),(0,d.jsxs)(B,{align:"end",className:"w-56",children:[(0,d.jsx)(D,{children:(0,d.jsxs)("div",{children:[(0,d.jsxs)("p",{className:"text-sm font-medium",children:[l?.firstName," ",l?.lastName]}),(0,d.jsx)("p",{className:"text-xs text-gray-500",children:l?.email}),l?.companyName&&(0,d.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:l.companyName})]})}),(0,d.jsx)(E,{}),(0,d.jsx)(C,{asChild:!0,children:(0,d.jsxs)(g(),{href:"/dashboard/profile",className:"cursor-pointer",children:[(0,d.jsx)(o.A,{className:"mr-2 h-4 w-4"}),"Profile Settings"]})}),(0,d.jsx)(C,{asChild:!0,children:(0,d.jsxs)(g(),{href:"/dashboard/billing",className:"cursor-pointer",children:[(0,d.jsx)(r.A,{className:"mr-2 h-4 w-4"}),"Billing & Credits"]})}),(0,d.jsx)(E,{}),(0,d.jsxs)(C,{onClick:m,className:"cursor-pointer text-red-600 focus:text-red-600",children:[(0,d.jsx)(t.A,{className:"mr-2 h-4 w-4"}),"Sign Out"]})]})]})]})})}),(0,d.jsx)("main",{className:"flex-1",children:(0,d.jsx)("div",{className:"px-4 py-6 sm:px-6 lg:px-8",children:a})})]})]})})}}};